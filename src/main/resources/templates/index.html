<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>主页面</title>
    <!-- 引入样式 -->
    <script type="text/javascript" src="../af/js/vue.js"></script>
    <script type="text/javascript" src="../af/js/axios.min.js"></script>

    <!-- 引入样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!-- 引入组件库 -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
</head>
<body>
<div id="app">
    <el-header>Header<span>王小虎</span></el-header>
    <el-container style="height: 835px; border: 1px solid #eee">
        <el-aside width="200px" style="background-color: rgb(238, 241, 246)">
            <el-tree :data="dataTree" :props="defaultProps" @node-click="handleNodeClick"></el-tree>
        </el-aside>
        <el-main>
            <div  style="border-radius:20px;">
                <iframe  id="ifr" scrolling="auto" frameborder="0"  src="/af/add" style="width:100%;height:600px;margin-top: 20px;"></iframe>
            </div>
        </el-main>
    </el-container>
</div>
<script>
var vm=new Vue({
    el: '#app',
    data: {
        dataTree: [],
        defaultProps: {
            children: 'children',
            label: 'lable'
        }
    },
    created: function () {
        var self = this;
        //在 then的内部不能使用Vue的实例化的this, 因为在内部 this 没有被绑定。
        axios.post('/af/tree/list').then(function (response) {
            self.dataTree = response.data;
            alert(JSON.stringify(self.dataTree));
        })
    },
    methods: {
        handleNodeClick(data) {
            console.log(data);
        }
    }
})
</script>
</body>
<style>
    .el-header {
        background-color: #203535;
        color: white;
        line-height: 60px;
    }

    .el-aside {
        color: #333;
    }

</style>
</html>